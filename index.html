<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­å•è¯æ¶ˆæ¶ˆä¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a8fe3 0%, #5ce1e6 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            text-align: center;
        }
        
        header {
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: #ff6b6b;
            text-shadow: 1px 1px 0 #ffd166;
        }
        
        .subtitle {
            font-size: 1rem;
            color: #118ab2;
            margin-bottom: 10px;
        }
        
        .grade-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
            justify-content: center;
        }
        
        .grade-btn {
            padding: 8px 15px;
            border-radius: 20px;
            background: #e0e0e0;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .grade-btn.active {
            background: #118ab2;
            color: white;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .info-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 3px;
        }
        
        .info-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ef476f;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 15px;
            width: 100%;
        }
        
        .card {
            aspect-ratio: 1/1;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            position: relative;
            overflow: hidden;
            min-height: 70px;
        }
        
        .card:active {
            transform: scale(0.95);
        }
        
        .card.selected {
            box-shadow: 0 0 0 3px #ffd166, 0 0 10px #ff9e6d;
            transform: scale(1.05);
        }
        
        .card.matched {
            opacity: 0.5;
            transform: scale(0.92);
            cursor: default;
            animation: matchedAnimation 0.5s ease-out;
        }
        
        .card-image {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .card-word {
            font-size: 0.9rem;
            font-weight: bold;
            text-align: center;
            line-height: 1.2;
        }
        
        .card-type-english {
            background: linear-gradient(135deg, #ffd166 0%, #ff9e6d 100%);
        }
        
        .card-type-image {
            background: linear-gradient(135deg, #a8e6cf 0%, #5ce1e6 100%);
        }
        
        .sound-icon {
            position: absolute;
            top: 3px;
            right: 3px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #ffd166;
            color: #333;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 120px;
        }
        
        button:active {
            transform: translateY(2px);
        }
        
        #restart {
            background: #ef476f;
            color: white;
        }
        
        #nextLevel {
            background: #06d6a0;
            color: white;
            display: none;
        }
        
        #continueGame {
            background: #118ab2;
            color: white;
            display: none;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: left;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .instructions h3 {
            margin-bottom: 8px;
            color: #118ab2;
            font-size: 1.1rem;
        }
        
        .instructions p {
            margin-bottom: 6px;
            line-height: 1.4;
            font-size: 0.9rem;
        }
        
        .timer-warning {
            color: #ef476f;
            animation: pulse 1s infinite;
        }
        
        .completion-message {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .game-over-message {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .continue-count {
            background: #ffd166;
            color: #333;
            padding: 5px 10px;
            border-radius: 10px;
            font-weight: bold;
            margin: 10px 0;
            display: inline-block;
        }
        
        /* ç¤¼èŠ±æ•ˆæœ */
        .firework {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes firework {
            0% {
                transform: translate(var(--x), var(--y));
                width: 4px;
                height: 4px;
                opacity: 1;
            }
            50% {
                width: 2px;
                height: 2px;
                opacity: 1;
            }
            100% {
                width: 150px;
                height: 150px;
                opacity: 0;
                transform: translate(var(--x), var(--y)) scale(0);
            }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        @keyframes matchedAnimation {
            0% { transform: scale(1.1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(0.92); }
        }
        
        @keyframes wrongMatch {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        .wrong-match {
            animation: wrongMatch 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>è‹±è¯­å•è¯æ¶ˆæ¶ˆä¹</h1>
            <p class="subtitle">åŒ¹é…è‹±è¯­å•è¯ä¸å¯¹åº”å›¾ç‰‡ï¼</p>
            
            <div class="grade-selector">
                <button class="grade-btn active" data-grade="1">ä¸€å¹´çº§</button>
                <button class="grade-btn" data-grade="2">äºŒå¹´çº§</button>
                <button class="grade-btn" data-grade="3">ä¸‰å¹´çº§</button>
                <button class="grade-btn" data-grade="4">å››å¹´çº§</button>
                <button class="grade-btn" data-grade="5">äº”å¹´çº§</button>
                <button class="grade-btn" data-grade="6">å…­å¹´çº§</button>
            </div>
        </header>
        
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">æ—¶é—´</div>
                <div class="info-value" id="timer">60</div>
            </div>
            <div class="info-item">
                <div class="info-label">åˆ†æ•°</div>
                <div class="info-value" id="score">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">å…³å¡</div>
                <div class="info-value" id="level">1</div>
            </div>
        </div>
        
        <div id="completionMessage" class="completion-message" style="display: none;">
            <h2>æ­å–œï¼ä½ å·²ç»å­¦å®Œäº†æ‰€æœ‰å•è¯ï¼</h2>
            <p>ä½ å·²æŒæ¡ <span id="totalWordsLearned">0</span> ä¸ªå•è¯ï¼</p>
            <button id="resetWords">é‡æ–°å¼€å§‹å­¦ä¹ </button>
        </div>
        
        <div id="gameOverMessage" class="game-over-message">
            <h2>æ—¶é—´åˆ°ï¼æ¸¸æˆç»“æŸ</h2>
            <p>ä½ çš„å¾—åˆ†: <span id="finalScore">0</span> åˆ†</p>
            <p>å‰©ä½™ç»§ç»­æ¸¸æˆæ¬¡æ•°: <span id="continueCount">2</span> æ¬¡</p>
            <div class="controls">
                <button id="continueGame">ç»§ç»­æ¸¸æˆ</button>
                <button id="restartFromGameOver">é‡æ–°å¼€å§‹</button>
            </div>
        </div>
        
        <div class="game-board" id="gameBoard">
            <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="controls">
            <button id="start">å¼€å§‹æ¸¸æˆ</button>
            <button id="nextLevel">ä¸‹ä¸€å…³</button>
            <button id="restart">é‡æ–°å¼€å§‹</button>
        </div>
        
        <div class="instructions">
            <h3>æ¸¸æˆè¯´æ˜ï¼š</h3>
            <p>1. ç‚¹å‡»å¡ç‰‡å¯ä»¥å¬åˆ°å•è¯å‘éŸ³</p>
            <p>2. ç‚¹å‡»ä¸€ä¸ªè‹±è¯­å•è¯ï¼Œç„¶åç‚¹å‡»å¯¹åº”çš„å›¾ç‰‡è¿›è¡ŒåŒ¹é…</p>
            <p>3. åŒ¹é…æˆåŠŸåˆ™æ¶ˆé™¤ï¼ŒåŒ¹é…é”™è¯¯éœ€è¦é‡æ–°é€‰æ‹©</p>
            <p>4. åœ¨60ç§’å†…åŒ¹é…æ‰€æœ‰å•è¯å¯¹å³å¯è¿›å…¥ä¸‹ä¸€å…³</p>
            <p>5. æ—¶é—´ç”¨å®Œåæœ‰2æ¬¡ç»§ç»­æ¸¸æˆçš„æœºä¼š</p>
        </div>
    </div>

    <script>
        // å„å¹´çº§è‹±è¯­å•è¯åº“ - æ ¹æ®æ•™è‚²ç³»ç»Ÿè¯æ±‡é‡è¦æ±‚
        const gradeWords = {
            1: [ // ä¸€å¹´çº§ - çº¦100è¯
                { english: "cat", chinese: "çŒ«", image: "ğŸ±" },
                { english: "dog", chinese: "ç‹—", image: "ğŸ¶" },
                { english: "fish", chinese: "é±¼", image: "ğŸŸ" },
                { english: "bird", chinese: "é¸Ÿ", image: "ğŸ¦" },
                { english: "rabbit", chinese: "å…”å­", image: "ğŸ°" },
                { english: "bear", chinese: "ç†Š", image: "ğŸ»" },
                { english: "lion", chinese: "ç‹®å­", image: "ğŸ¦" },
                { english: "tiger", chinese: "è€è™", image: "ğŸ¯" },
                { english: "elephant", chinese: "å¤§è±¡", image: "ğŸ˜" },
                { english: "monkey", chinese: "çŒ´å­", image: "ğŸ’" },
                { english: "apple", chinese: "è‹¹æœ", image: "ğŸ" },
                { english: "banana", chinese: "é¦™è•‰", image: "ğŸŒ" },
                { english: "orange", chinese: "æ©™å­", image: "ğŸŠ" },
                { english: "grape", chinese: "è‘¡è„", image: "ğŸ‡" },
                { english: "pear", chinese: "æ¢¨", image: "ğŸ" },
                { english: "peach", chinese: "æ¡ƒå­", image: "ğŸ‘" },
                { english: "watermelon", chinese: "è¥¿ç“œ", image: "ğŸ‰" },
                { english: "strawberry", chinese: "è‰è“", image: "ğŸ“" },
                { english: "pineapple", chinese: "è è", image: "ğŸ" },
                { english: "cherry", chinese: "æ¨±æ¡ƒ", image: "ğŸ’" },
                { english: "egg", chinese: "é¸¡è›‹", image: "ğŸ¥š" },
                { english: "milk", chinese: "ç‰›å¥¶", image: "ğŸ¥›" },
                { english: "bread", chinese: "é¢åŒ…", image: "ğŸ" },
                { english: "rice", chinese: "ç±³é¥­", image: "ğŸš" },
                { english: "cake", chinese: "è›‹ç³•", image: "ğŸ°" },
                { english: "ice cream", chinese: "å†°æ·‡æ·‹", image: "ğŸ¦" },
                { english: "juice", chinese: "æœæ±", image: "ğŸ§ƒ" },
                { english: "water", chinese: "æ°´", image: "ğŸ’§" },
                { english: "tea", chinese: "èŒ¶", image: "ğŸµ" },
                { english: "candy", chinese: "ç³–æœ", image: "ğŸ¬" },
                { english: "red", chinese: "çº¢è‰²", image: "ğŸ”´" },
                { english: "blue", chinese: "è“è‰²", image: "ğŸ”µ" },
                { english: "yellow", chinese: "é»„è‰²", image: "ğŸŸ¡" },
                { english: "green", chinese: "ç»¿è‰²", image: "ğŸŸ¢" },
                { english: "orange", chinese: "æ©™è‰²", image: "ğŸŸ " },
                { english: "purple", chinese: "ç´«è‰²", image: "ğŸŸ£" },
                { english: "pink", chinese: "ç²‰è‰²", image: "ğŸŒ¸" },
                { english: "black", chinese: "é»‘è‰²", image: "âš«" },
                { english: "white", chinese: "ç™½è‰²", image: "âšª" },
                { english: "brown", chinese: "æ£•è‰²", image: "ğŸŸ¤" },
                { english: "one", chinese: "ä¸€", image: "1ï¸âƒ£" },
                { english: "two", chinese: "äºŒ", image: "2ï¸âƒ£" },
                { english: "three", chinese: "ä¸‰", image: "3ï¸âƒ£" },
                { english: "four", chinese: "å››", image: "4ï¸âƒ£" },
                { english: "five", chinese: "äº”", image: "5ï¸âƒ£" },
                { english: "six", chinese: "å…­", image: "6ï¸âƒ£" },
                { english: "seven", chinese: "ä¸ƒ", image: "7ï¸âƒ£" },
                { english: "eight", chinese: "å…«", image: "8ï¸âƒ£" },
                { english: "nine", chinese: "ä¹", image: "9ï¸âƒ£" },
                { english: "ten", chinese: "å", image: "ğŸ”Ÿ" },
                { english: "book", chinese: "ä¹¦", image: "ğŸ“–" },
                { english: "pencil", chinese: "é“…ç¬”", image: "âœï¸" },
                { english: "pen", chinese: "é’¢ç¬”", image: "ğŸ–Šï¸" },
                { english: "ruler", chinese: "å°ºå­", image: "ğŸ“" },
                { english: "bag", chinese: "ä¹¦åŒ…", image: "ğŸ’" },
                { english: "desk", chinese: "ä¹¦æ¡Œ", image: "ğŸª‘" },
                { english: "chair", chinese: "æ¤…å­", image: "ğŸª‘" },
                { english: "teacher", chinese: "è€å¸ˆ", image: "ğŸ‘©â€ğŸ«" },
                { english: "student", chinese: "å­¦ç”Ÿ", image: "ğŸ‘¨â€ğŸ“" },
                { english: "school", chinese: "å­¦æ ¡", image: "ğŸ«" },
                { english: "father", chinese: "çˆ¸çˆ¸", image: "ğŸ‘¨" },
                { english: "mother", chinese: "å¦ˆå¦ˆ", image: "ğŸ‘©" },
                { english: "brother", chinese: "å…„å¼Ÿ", image: "ğŸ‘¦" },
                { english: "sister", chinese: "å§å¦¹", image: "ğŸ‘§" },
                { english: "baby", chinese: "å®å®", image: "ğŸ‘¶" },
                { english: "family", chinese: "å®¶åº­", image: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" },
                { english: "friend", chinese: "æœ‹å‹", image: "ğŸ‘«" },
                { english: "boy", chinese: "ç”·å­©", image: "ğŸ‘¦" },
                { english: "girl", chinese: "å¥³å­©", image: "ğŸ‘§" },
                { english: "people", chinese: "äººä»¬", image: "ğŸ‘¥" },
                { english: "ball", chinese: "çƒ", image: "âš½" },
                { english: "doll", chinese: "å¨ƒå¨ƒ", image: "ğŸ‘§" },
                { english: "car", chinese: "å°æ±½è½¦", image: "ğŸš—" },
                { english: "house", chinese: "æˆ¿å­", image: "ğŸ " },
                { english: "bed", chinese: "åºŠ", image: "ğŸ›ï¸" },
                { english: "table", chinese: "æ¡Œå­", image: "ğŸª‘" },
                { english: "door", chinese: "é—¨", image: "ğŸšª" },
                { english: "window", chinese: "çª—æˆ·", image: "ğŸªŸ" },
                { english: "clock", chinese: "é’Ÿè¡¨", image: "â°" },
                { english: "phone", chinese: "ç”µè¯", image: "ğŸ“" },
                { english: "sun", chinese: "å¤ªé˜³", image: "â˜€ï¸" },
                { english: "moon", chinese: "æœˆäº®", image: "ğŸŒ™" },
                { english: "star", chinese: "æ˜Ÿæ˜Ÿ", image: "â­" },
                { english: "cloud", chinese: "äº‘", image: "â˜ï¸" },
                { english: "rain", chinese: "é›¨", image: "ğŸŒ§ï¸" },
                { english: "snow", chinese: "é›ª", image: "â„ï¸" },
                { english: "tree", chinese: "æ ‘", image: "ğŸŒ³" },
                { english: "flower", chinese: "èŠ±", image: "ğŸŒº" },
                { english: "grass", chinese: "è‰", image: "ğŸŒ¿" },
                { english: "hat", chinese: "å¸½å­", image: "ğŸ§¢" },
                { english: "shirt", chinese: "è¡¬è¡«", image: "ğŸ‘•" },
                { english: "pants", chinese: "è£¤å­", image: "ğŸ‘–" },
                { english: "shoes", chinese: "é‹å­", image: "ğŸ‘Ÿ" },
                { english: "socks", chinese: "è¢œå­", image: "ğŸ§¦" },
                { english: "coat", chinese: "å¤–å¥—", image: "ğŸ§¥" },
                { english: "gloves", chinese: "æ‰‹å¥—", image: "ğŸ§¤" },
                { english: "scarf", chinese: "å›´å·¾", image: "ğŸ§£" },
                { english: "umbrella", chinese: "é›¨ä¼", image: "â˜‚ï¸" }
            ],
            2: [ // äºŒå¹´çº§ - çº¦200è¯
                // åŒ…å«ä¸€å¹´çº§è¯æ±‡å¹¶å¢åŠ æ–°è¯
                { english: "run", chinese: "è·‘", image: "ğŸƒ" },
                { english: "jump", chinese: "è·³", image: "ğŸ¤¸" },
                { english: "swim", chinese: "æ¸¸æ³³", image: "ğŸŠ" },
                { english: "dance", chinese: "è·³èˆ", image: "ğŸ’ƒ" },
                { english: "sing", chinese: "å”±æ­Œ", image: "ğŸ¤" },
                { english: "play", chinese: "ç©", image: "ğŸ®" },
                { english: "read", chinese: "è¯»", image: "ğŸ“š" },
                { english: "write", chinese: "å†™", image: "âœï¸" },
                { english: "draw", chinese: "ç”»", image: "ğŸ¨" },
                { english: "eat", chinese: "åƒ", image: "ğŸ½ï¸" },
                { english: "drink", chinese: "å–", image: "ğŸ¥¤" },
                { english: "sleep", chinese: "ç¡è§‰", image: "ğŸ˜´" },
                { english: "wake", chinese: "é†’æ¥", image: "â°" },
                { english: "work", chinese: "å·¥ä½œ", image: "ğŸ’¼" },
                { english: "study", chinese: "å­¦ä¹ ", image: "ğŸ“–" },
                { english: "help", chinese: "å¸®åŠ©", image: "ğŸ™‹" },
                { english: "love", chinese: "çˆ±", image: "â¤ï¸" },
                { english: "like", chinese: "å–œæ¬¢", image: "ğŸ‘" },
                { english: "want", chinese: "æƒ³è¦", image: "ğŸ¤²" },
                { english: "need", chinese: "éœ€è¦", image: "ğŸ†˜" },
                { english: "big", chinese: "å¤§", image: "ğŸ”" },
                { english: "small", chinese: "å°", image: "ğŸ”" },
                { english: "tall", chinese: "é«˜", image: "ğŸ“" },
                { english: "short", chinese: "çŸ®", image: "ğŸ“" },
                { english: "long", chinese: "é•¿", image: "ğŸ“" },
                { english: "fast", chinese: "å¿«", image: "âš¡" },
                { english: "slow", chinese: "æ…¢", image: "ğŸŒ" },
                { english: "hot", chinese: "çƒ­", image: "ğŸ”¥" },
                { english: "cold", chinese: "å†·", image: "â„ï¸" },
                { english: "happy", chinese: "å¼€å¿ƒ", image: "ğŸ˜Š" },
                { english: "sad", chinese: "ä¼¤å¿ƒ", image: "ğŸ˜¢" },
                { english: "angry", chinese: "ç”Ÿæ°”", image: "ğŸ˜ " },
                { english: "tired", chinese: "ç´¯", image: "ğŸ˜«" },
                { english: "hungry", chinese: "é¥¿", image: "ğŸ½ï¸" },
                { english: "thirsty", chinese: "æ¸´", image: "ğŸ¥¤" },
                { english: "clean", chinese: "å¹²å‡€", image: "âœ¨" },
                { english: "dirty", chinese: "è„", image: "ğŸ’©" },
                { english: "new", chinese: "æ–°", image: "ğŸ†•" },
                { english: "old", chinese: "æ—§", image: "ğŸ†“" },
                { english: "good", chinese: "å¥½", image: "ğŸ‘" },
                { english: "bad", chinese: "å", image: "ğŸ‘" },
                { english: "beautiful", chinese: "ç¾ä¸½", image: "ğŸŒ¸" },
                { english: "ugly", chinese: "ä¸‘", image: "ğŸ‘¹" },
                { english: "strong", chinese: "å¼ºå£®", image: "ğŸ’ª" },
                { english: "weak", chinese: "è™šå¼±", image: "ğŸ¦µ" },
                { english: "rich", chinese: "å¯Œæœ‰", image: "ğŸ’°" },
                { english: "poor", chinese: "è´«ç©·", image: "ğŸª™" },
                { english: "easy", chinese: "å®¹æ˜“", image: "ğŸ˜Œ" },
                { english: "difficult", chinese: "å›°éš¾", image: "ğŸ˜“" },
                { english: "right", chinese: "æ­£ç¡®", image: "âœ…" },
                { english: "wrong", chinese: "é”™è¯¯", image: "âŒ" }
            ],
            3: [ // ä¸‰å¹´çº§ - çº¦400è¯
                // åŒ…å«ä¸€ã€äºŒå¹´çº§è¯æ±‡å¹¶å¢åŠ æ–°è¯
                { english: "animal", chinese: "åŠ¨ç‰©", image: "ğŸ¾" },
                { english: "plant", chinese: "æ¤ç‰©", image: "ğŸŒ±" },
                { english: "fruit", chinese: "æ°´æœ", image: "ğŸ" },
                { english: "vegetable", chinese: "è”¬èœ", image: "ğŸ¥¦" },
                { english: "weather", chinese: "å¤©æ°”", image: "ğŸŒ¤ï¸" },
                { english: "season", chinese: "å­£èŠ‚", image: "ğŸ‚" },
                { english: "spring", chinese: "æ˜¥å¤©", image: "ğŸŒ·" },
                { english: "summer", chinese: "å¤å¤©", image: "â˜€ï¸" },
                { english: "autumn", chinese: "ç§‹å¤©", image: "ğŸ" },
                { english: "winter", chinese: "å†¬å¤©", image: "â›„" },
                { english: "today", chinese: "ä»Šå¤©", image: "ğŸ“…" },
                { english: "yesterday", chinese: "æ˜¨å¤©", image: "ğŸ“†" },
                { english: "tomorrow", chinese: "æ˜å¤©", image: "ğŸ“…" },
                { english: "morning", chinese: "æ—©ä¸Š", image: "ğŸŒ…" },
                { english: "afternoon", chinese: "ä¸‹åˆ", image: "ğŸŒ‡" },
                { english: "evening", chinese: "æ™šä¸Š", image: "ğŸŒƒ" },
                { english: "night", chinese: "å¤œæ™š", image: "ğŸŒ™" },
                { english: "week", chinese: "å‘¨", image: "ğŸ“…" },
                { english: "month", chinese: "æœˆ", image: "ğŸ“†" },
                { english: "year", chinese: "å¹´", image: "ğŸ‰" },
                { english: "time", chinese: "æ—¶é—´", image: "â°" },
                { english: "hour", chinese: "å°æ—¶", image: "ğŸ•" },
                { english: "minute", chinese: "åˆ†é’Ÿ", image: "â±ï¸" },
                { english: "second", chinese: "ç§’", image: "â²ï¸" },
                { english: "always", chinese: "æ€»æ˜¯", image: "ğŸ”„" },
                { english: "often", chinese: "ç»å¸¸", image: "ğŸ”" },
                { english: "sometimes", chinese: "æœ‰æ—¶", image: "ğŸ”„" },
                { english: "never", chinese: "ä»ä¸", image: "ğŸš«" },
                { english: "every", chinese: "æ¯ä¸ª", image: "ğŸ”¢" },
                { english: "many", chinese: "è®¸å¤š", image: "ğŸ”¢" },
                { english: "much", chinese: "å¾ˆå¤š", image: "ğŸ”¢" },
                { english: "few", chinese: "å¾ˆå°‘", image: "ğŸ”¢" },
                { english: "some", chinese: "ä¸€äº›", image: "ğŸ”¢" },
                { english: "any", chinese: "ä»»ä½•", image: "â“" },
                { english: "all", chinese: "å…¨éƒ¨", image: "ğŸ”¢" },
                { english: "both", chinese: "ä¸¤è€…", image: "ğŸ‘¥" },
                { english: "either", chinese: "ä»»ä¸€", image: "ğŸ‘¤" },
                { english: "neither", chinese: "éƒ½ä¸", image: "ğŸš«" },
                { english: "each", chinese: "æ¯ä¸ª", image: "ğŸ‘¤" },
                { english: "other", chinese: "å…¶ä»–", image: "ğŸ”„" },
                { english: "another", chinese: "å¦ä¸€ä¸ª", image: "ğŸ”„" },
                { english: "such", chinese: "è¿™æ ·çš„", image: "ğŸ‘‰" },
                { english: "same", chinese: "ç›¸åŒçš„", image: "ğŸ”„" },
                { english: "different", chinese: "ä¸åŒçš„", image: "ğŸ”„" },
                { english: "important", chinese: "é‡è¦çš„", image: "â—" },
                { english: "interesting", chinese: "æœ‰è¶£çš„", image: "ğŸ˜„" },
                { english: "boring", chinese: "æ— èŠçš„", image: "ğŸ˜´" },
                { english: "exciting", chinese: "ä»¤äººå…´å¥‹çš„", image: "ğŸ‰" },
                { english: "dangerous", chinese: "å±é™©çš„", image: "âš ï¸" },
                { english: "safe", chinese: "å®‰å…¨çš„", image: "ğŸ›¡ï¸" }
            ],
            4: [ // å››å¹´çº§ - çº¦600è¯
                // åŒ…å«ä¸€è‡³ä¸‰å¹´çº§è¯æ±‡å¹¶å¢åŠ æ–°è¯
                { english: "country", chinese: "å›½å®¶", image: "ğŸ—ºï¸" },
                { english: "city", chinese: "åŸå¸‚", image: "ğŸ™ï¸" },
                { english: "village", chinese: "æ‘åº„", image: "ğŸï¸" },
                { english: "street", chinese: "è¡—é“", image: "ğŸ›£ï¸" },
                { english: "road", chinese: "é“è·¯", image: "ğŸ›£ï¸" },
                { english: "building", chinese: "å»ºç­‘ç‰©", image: "ğŸ¢" },
                { english: "house", chinese: "æˆ¿å­", image: "ğŸ " },
                { english: "apartment", chinese: "å…¬å¯“", image: "ğŸ¢" },
                { english: "room", chinese: "æˆ¿é—´", image: "ğŸšª" },
                { english: "kitchen", chinese: "å¨æˆ¿", image: "ğŸ³" },
                { english: "bathroom", chinese: "æµ´å®¤", image: "ğŸš¿" },
                { english: "bedroom", chinese: "å§å®¤", image: "ğŸ›ï¸" },
                { english: "living room", chinese: "å®¢å…", image: "ğŸ›‹ï¸" },
                { english: "garden", chinese: "èŠ±å›­", image: "ğŸŒ·" },
                { english: "park", chinese: "å…¬å›­", image: "ğŸï¸" },
                { english: "zoo", chinese: "åŠ¨ç‰©å›­", image: "ğŸ¯" },
                { english: "museum", chinese: "åšç‰©é¦†", image: "ğŸ›ï¸" },
                { english: "library", chinese: "å›¾ä¹¦é¦†", image: "ğŸ“š" },
                { english: "hospital", chinese: "åŒ»é™¢", image: "ğŸ¥" },
                { english: "bank", chinese: "é“¶è¡Œ", image: "ğŸ¦" },
                { english: "post office", chinese: "é‚®å±€", image: "ğŸ“®" },
                { english: "police station", chinese: "è­¦å¯Ÿå±€", image: "ğŸ‘®" },
                { english: "fire station", chinese: "æ¶ˆé˜²ç«™", image: "ğŸš’" },
                { english: "supermarket", chinese: "è¶…å¸‚", image: "ğŸ›’" },
                { english: "market", chinese: "å¸‚åœº", image: "ğŸ›ï¸" },
                { english: "restaurant", chinese: "é¤å…", image: "ğŸ½ï¸" },
                { english: "cafe", chinese: "å’–å•¡é¦†", image: "â˜•" },
                { english: "hotel", chinese: "é…’åº—", image: "ğŸ¨" },
                { english: "cinema", chinese: "ç”µå½±é™¢", image: "ğŸ¬" },
                { english: "theater", chinese: "å‰§é™¢", image: "ğŸ­" },
                { english: "stadium", chinese: "ä½“è‚²åœº", image: "ğŸŸï¸" },
                { english: "swimming pool", chinese: "æ¸¸æ³³æ± ", image: "ğŸŠ" },
                { english: "gym", chinese: "å¥èº«æˆ¿", image: "ğŸ’ª" },
                { english: "playground", chinese: "æ“åœº", image: "ğŸª" },
                { english: "beach", chinese: "æµ·æ»©", image: "ğŸ–ï¸" },
                { english: "mountain", chinese: "å±±", image: "â›°ï¸" },
                { english: "river", chinese: "æ²³æµ", image: "ğŸŒŠ" },
                { english: "lake", chinese: "æ¹–", image: "ğŸï¸" },
                { english: "sea", chinese: "æµ·", image: "ğŸŒŠ" },
                { english: "ocean", chinese: "æµ·æ´‹", image: "ğŸŒŠ" },
                { english: "island", chinese: "å²›å±¿", image: "ğŸï¸" },
                { english: "forest", chinese: "æ£®æ—", image: "ğŸŒ²" },
                { english: "desert", chinese: "æ²™æ¼ ", image: "ğŸœï¸" },
                { english: "bridge", chinese: "æ¡¥", image: "ğŸŒ‰" },
                { english: "tunnel", chinese: "éš§é“", image: "ğŸš‡" },
                { english: "airport", chinese: "æœºåœº", image: "âœˆï¸" },
                { english: "station", chinese: "è½¦ç«™", image: "ğŸš‰" },
                { english: "bus stop", chinese: "å…¬äº¤ç«™", image: "ğŸš" },
                { english: "taxi", chinese: "å‡ºç§Ÿè½¦", image: "ğŸš•" },
                { english: "subway", chinese: "åœ°é“", image: "ğŸš‡" }
            ],
            5: [ // äº”å¹´çº§ - çº¦800è¯
                // åŒ…å«ä¸€è‡³å››å¹´çº§è¯æ±‡å¹¶å¢åŠ æ–°è¯
                { english: "science", chinese: "ç§‘å­¦", image: "ğŸ”¬" },
                { english: "math", chinese: "æ•°å­¦", image: "ğŸ“" },
                { english: "history", chinese: "å†å²", image: "ğŸ“œ" },
                { english: "geography", chinese: "åœ°ç†", image: "ğŸ—ºï¸" },
                { english: "art", chinese: "è‰ºæœ¯", image: "ğŸ¨" },
                { english: "music", chinese: "éŸ³ä¹", image: "ğŸµ" },
                { english: "sport", chinese: "ä½“è‚²", image: "âš½" },
                { english: "computer", chinese: "ç”µè„‘", image: "ğŸ’»" },
                { english: "internet", chinese: "äº’è”ç½‘", image: "ğŸŒ" },
                { english: "email", chinese: "ç”µå­é‚®ä»¶", image: "ğŸ“§" },
                { english: "website", chinese: "ç½‘ç«™", image: "ğŸŒ" },
                { english: "game", chinese: "æ¸¸æˆ", image: "ğŸ®" },
                { english: "movie", chinese: "ç”µå½±", image: "ğŸ¬" },
                { english: "song", chinese: "æ­Œæ›²", image: "ğŸµ" },
                { english: "book", chinese: "ä¹¦", image: "ğŸ“–" },
                { english: "story", chinese: "æ•…äº‹", image: "ğŸ“š" },
                { english: "poem", chinese: "è¯—æ­Œ", image: "ğŸ“œ" },
                { english: "news", chinese: "æ–°é—»", image: "ğŸ“°" },
                { english: "magazine", chinese: "æ‚å¿—", image: "ğŸ“°" },
                { english: "newspaper", chinese: "æŠ¥çº¸", image: "ğŸ“°" },
                { english: "television", chinese: "ç”µè§†", image: "ğŸ“º" },
                { english: "radio", chinese: "æ”¶éŸ³æœº", image: "ğŸ“»" },
                { english: "camera", chinese: "ç›¸æœº", image: "ğŸ“·" },
                { english: "phone", chinese: "ç”µè¯", image: "ğŸ“" },
                { english: "clock", chinese: "é’Ÿè¡¨", image: "â°" },
                { english: "watch", chinese: "æ‰‹è¡¨", image: "âŒš" },
                { english: "calendar", chinese: "æ—¥å†", image: "ğŸ“…" },
                { english: "map", chinese: "åœ°å›¾", image: "ğŸ—ºï¸" },
                { english: "globe", chinese: "åœ°çƒä»ª", image: "ğŸŒ" },
                { english: "compass", chinese: "æŒ‡å—é’ˆ", image: "ğŸ§­" },
                { english: "ruler", chinese: "å°ºå­", image: "ğŸ“" },
                { english: "pen", chinese: "é’¢ç¬”", image: "ğŸ–Šï¸" },
                { english: "pencil", chinese: "é“…ç¬”", image: "âœï¸" },
                { english: "eraser", chinese: "æ©¡çš®", image: "ğŸ§½" },
                { english: "notebook", chinese: "ç¬”è®°æœ¬", image: "ğŸ““" },
                { english: "backpack", chinese: "èƒŒåŒ…", image: "ğŸ’" },
                { english: "lunchbox", chinese: "åˆé¤ç›’", image: "ğŸ±" },
                { english: "water bottle", chinese: "æ°´ç“¶", image: "ğŸ’§" },
                { english: "umbrella", chinese: "é›¨ä¼", image: "â˜‚ï¸" },
                { english: "key", chinese: "é’¥åŒ™", image: "ğŸ”‘" },
                { english: "wallet", chinese: "é’±åŒ…", image: "ğŸ‘›" },
                { english: "money", chinese: "é’±", image: "ğŸ’°" },
                { english: "coin", chinese: "ç¡¬å¸", image: "ğŸª™" },
                { english: "bill", chinese: "çº¸å¸", image: "ğŸ’µ" },
                { english: "credit card", chinese: "ä¿¡ç”¨å¡", image: "ğŸ’³" },
                { english: "ticket", chinese: "ç¥¨", image: "ğŸ«" },
                { english: "passport", chinese: "æŠ¤ç…§", image: "ğŸ“˜" },
                { english: "ID card", chinese: "èº«ä»½è¯", image: "ğŸ†”" },
                { english: "license", chinese: "è®¸å¯è¯", image: "ğŸ“„" },
                { english: "certificate", chinese: "è¯ä¹¦", image: "ğŸ“œ" }
            ],
            6: [ // å…­å¹´çº§ - çº¦1000è¯
                // åŒ…å«ä¸€è‡³äº”å¹´çº§è¯æ±‡å¹¶å¢åŠ æ–°è¯
                { english: "environment", chinese: "ç¯å¢ƒ", image: "ğŸŒ" },
                { english: "pollution", chinese: "æ±¡æŸ“", image: "ğŸ­" },
                { english: "recycle", chinese: "å›æ”¶", image: "â™»ï¸" },
                { english: "energy", chinese: "èƒ½æº", image: "âš¡" },
                { english: "electricity", chinese: "ç”µ", image: "ğŸ’¡" },
                { english: "water", chinese: "æ°´", image: "ğŸ’§" },
                { english: "air", chinese: "ç©ºæ°”", image: "ğŸ’¨" },
                { english: "fire", chinese: "ç«", image: "ğŸ”¥" },
                { english: "earth", chinese: "åœ°çƒ", image: "ğŸŒ" },
                { english: "sun", chinese: "å¤ªé˜³", image: "â˜€ï¸" },
                { english: "moon", chinese: "æœˆäº®", image: "ğŸŒ™" },
                { english: "star", chinese: "æ˜Ÿæ˜Ÿ", image: "â­" },
                { english: "planet", chinese: "è¡Œæ˜Ÿ", image: "ğŸª" },
                { english: "galaxy", chinese: "æ˜Ÿç³»", image: "ğŸŒŒ" },
                { english: "universe", chinese: "å®‡å®™", image: "ğŸŒŒ" },
                { english: "space", chinese: "å¤ªç©º", image: "ğŸš€" },
                { english: "rocket", chinese: "ç«ç®­", image: "ğŸš€" },
                { english: "satellite", chinese: "å«æ˜Ÿ", image: "ğŸ›°ï¸" },
                { english: "astronaut", chinese: "å®‡èˆªå‘˜", image: "ğŸ‘¨â€ğŸš€" },
                { english: "alien", chinese: "å¤–æ˜Ÿäºº", image: "ğŸ‘½" },
                { english: "robot", chinese: "æœºå™¨äºº", image: "ğŸ¤–" },
                { english: "machine", chinese: "æœºå™¨", image: "âš™ï¸" },
                { english: "tool", chinese: "å·¥å…·", image: "ğŸ› ï¸" },
                { english: "engine", chinese: "å‘åŠ¨æœº", image: "ğŸš—" },
                { english: "wheel", chinese: "è½®å­", image: "ğŸ›" },
                { english: "computer", chinese: "ç”µè„‘", image: "ğŸ’»" },
                { english: "software", chinese: "è½¯ä»¶", image: "ğŸ’¾" },
                { english: "hardware", chinese: "ç¡¬ä»¶", image: "ğŸ’¿" },
                { english: "program", chinese: "ç¨‹åº", image: "ğŸ“±" },
                { english: "app", chinese: "åº”ç”¨", image: "ğŸ“±" },
                { english: "website", chinese: "ç½‘ç«™", image: "ğŸŒ" },
                { english: "internet", chinese: "äº’è”ç½‘", image: "ğŸŒ" },
                { english: "WiFi", chinese: "æ— çº¿ç½‘ç»œ", image: "ğŸ“¶" },
                { english: "password", chinese: "å¯†ç ", image: "ğŸ”’" },
                { english: "username", chinese: "ç”¨æˆ·å", image: "ğŸ‘¤" },
                { english: "account", chinese: "è´¦æˆ·", image: "ğŸ’³" },
                { english: "profile", chinese: "ä¸ªäººèµ„æ–™", image: "ğŸ‘¤" },
                { english: "message", chinese: "æ¶ˆæ¯", image: "ğŸ’¬" },
                { english: "chat", chinese: "èŠå¤©", image: "ğŸ’¬" },
                { english: "call", chinese: "é€šè¯", image: "ğŸ“" },
                { english: "video", chinese: "è§†é¢‘", image: "ğŸ¥" },
                { english: "photo", chinese: "ç…§ç‰‡", image: "ğŸ“·" },
                { english: "camera", chinese: "ç›¸æœº", image: "ğŸ“·" },
                { english: "microphone", chinese: "éº¦å…‹é£", image: "ğŸ¤" },
                { english: "speaker", chinese: "æ‰¬å£°å™¨", image: "ğŸ”Š" },
                { english: "headphones", chinese: "è€³æœº", image: "ğŸ§" },
                { english: "screen", chinese: "å±å¹•", image: "ğŸ–¥ï¸" },
                { english: "keyboard", chinese: "é”®ç›˜", image: "âŒ¨ï¸" },
                { english: "mouse", chinese: "é¼ æ ‡", image: "ğŸ–±ï¸" }
            ]
        };

        // æ¸¸æˆçŠ¶æ€å˜é‡
        let cards = [];
        let selectedCards = [];
        let matchedPairs = 0;
        let score = 0;
        let timeLeft = 60;
        let timer = null;
        let gameStarted = false;
        let currentLevel = 1;
        let wordsLearnedToday = 0;
        let totalAttempts = 0;
        let correctAttempts = 0;
        let speechSynthesis;
        let gameCompleted = false;
        let continueCount = 2;
        let currentGrade = 1;
        
        // è®°å½•å·²ä½¿ç”¨çš„å•è¯
        let usedWords = new Set();
        
        // DOMå…ƒç´ 
        const gameBoard = document.getElementById('gameBoard');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const startButton = document.getElementById('start');
        const nextLevelButton = document.getElementById('nextLevel');
        const restartButton = document.getElementById('restart');
        const continueGameButton = document.getElementById('continueGame');
        const restartFromGameOverButton = document.getElementById('restartFromGameOver');
        const completionMessage = document.getElementById('completionMessage');
        const gameOverMessage = document.getElementById('gameOverMessage');
        const totalWordsLearnedDisplay = document.getElementById('totalWordsLearned');
        const finalScoreDisplay = document.getElementById('finalScore');
        const continueCountDisplay = document.getElementById('continueCount');
        const resetWordsButton = document.getElementById('resetWords');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            cards = [];
            selectedCards = [];
            matchedPairs = 0;
            timeLeft = 60;
            gameStarted = false;
            gameCompleted = false;
            
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
            speechSynthesis = window.speechSynthesis;
            
            // æ¸…ç©ºæ¸¸æˆæ¿
            gameBoard.innerHTML = '';
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            // éšè—æ¸¸æˆç»“æŸæ¶ˆæ¯
            gameOverMessage.style.display = 'none';
            gameBoard.style.display = 'grid';
            
            // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å¯ç”¨å•è¯
            if (!hasAvailableWords()) {
                showCompletionMessage();
                return;
            }
            
            // éšæœºé€‰æ‹©8ä¸ªæœªä½¿ç”¨è¿‡çš„å•è¯
            const selectedWords = [];
            const availableWords = gradeWords[currentGrade].filter(word => !usedWords.has(word.english));
            
            // å¦‚æœå¯ç”¨å•è¯ä¸è¶³8ä¸ªï¼Œä½¿ç”¨æ‰€æœ‰å‰©ä½™å•è¯
            const wordsToSelect = Math.min(8, availableWords.length);
            
            for (let i = 0; i < wordsToSelect; i++) {
                const randomIndex = Math.floor(Math.random() * availableWords.length);
                const selectedWord = availableWords[randomIndex];
                
                // æ·»åŠ åˆ°å·²ä½¿ç”¨é›†åˆ
                usedWords.add(selectedWord.english);
                selectedWords.push(selectedWord);
                
                // ä»å¯ç”¨å•è¯ä¸­ç§»é™¤
                availableWords.splice(randomIndex, 1);
            }
            
            // åˆ›å»ºå¡ç‰‡æ•°ç»„ï¼ˆæ¯å¯¹å•è¯ä¸¤å¼ å¡ç‰‡ï¼‰
            selectedWords.forEach(word => {
                cards.push({ 
                    type: 'english', 
                    content: word.english, 
                    pairId: word.english,
                    image: word.image,
                    chinese: word.chinese
                });
                cards.push({ 
                    type: 'image', 
                    content: word.image, 
                    pairId: word.english,
                    image: word.image,
                    chinese: word.chinese
                });
            });
            
            // æ´—ç‰Œç®—æ³•
            shuffleCards();
            
            // åˆ›å»ºå¡ç‰‡å…ƒç´ 
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card card-type-${card.type}`;
                cardElement.dataset.index = index;
                cardElement.dataset.pairId = card.pairId;
                cardElement.dataset.type = card.type;
                
                // æ·»åŠ å‘éŸ³å›¾æ ‡
                const soundIcon = document.createElement('div');
                soundIcon.className = 'sound-icon';
                soundIcon.innerHTML = 'ğŸ”Š';
                
                // ç¡®ä¿æ¯ä¸ªå¡ç‰‡åªæ˜¾ç¤ºä¸€ç§è¯­è¨€
                if (card.type === 'english') {
                    cardElement.innerHTML = `
                        <div class="card-word">${card.content}</div>
                    `;
                } else {
                    cardElement.innerHTML = `
                        <div class="card-image">${card.image}</div>
                        <div class="card-word">${card.chinese}</div>
                    `;
                }
                
                cardElement.appendChild(soundIcon);
                cardElement.addEventListener('click', () => {
                    // æ’­æ”¾å‘éŸ³
                    playWordSound(card);
                    // é€‰æ‹©å¡ç‰‡è¿›è¡ŒåŒ¹é…
                    selectCard(cardElement, index);
                });
                gameBoard.appendChild(cardElement);
            });
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            startButton.disabled = false;
            nextLevelButton.style.display = 'none';
            startButton.style.display = 'block';
        }
        
        // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å¯ç”¨å•è¯
        function hasAvailableWords() {
            return usedWords.size < gradeWords[currentGrade].length;
        }
        
        // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯
        function showCompletionMessage() {
            gameBoard.style.display = 'none';
            completionMessage.style.display = 'block';
            totalWordsLearnedDisplay.textContent = usedWords.size;
        }
        
        // æ˜¾ç¤ºæ¸¸æˆç»“æŸæ¶ˆæ¯
        function showGameOverMessage() {
            gameBoard.style.display = 'none';
            gameOverMessage.style.display = 'block';
            finalScoreDisplay.textContent = score;
            continueCountDisplay.textContent = continueCount;
            
            // å¦‚æœæ²¡æœ‰ç»§ç»­æ¬¡æ•°äº†ï¼Œéšè—ç»§ç»­æ¸¸æˆæŒ‰é’®
            if (continueCount <= 0) {
                continueGameButton.style.display = 'none';
            } else {
                continueGameButton.style.display = 'block';
            }
        }
        
        // æ’­æ”¾å•è¯å‘éŸ³
        function playWordSound(card) {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance();
            
            if (card.type === 'english') {
                // æ’­æ”¾è‹±æ–‡å‘éŸ³
                utterance.text = card.content;
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
            } else {
                // æ’­æ”¾ä¸­æ–‡å‘éŸ³
                utterance.text = card.chinese;
                utterance.lang = 'zh-CN';
                utterance.rate = 0.9;
            }
            
            utterance.volume = 1;
            utterance.pitch = 1;
            
            speechSynthesis.speak(utterance);
        }
        
        // æ´—ç‰Œç®—æ³•
        function shuffleCards() {
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
        }
        
        // é€‰æ‹©å¡ç‰‡
        function selectCard(cardElement, index) {
            // å¦‚æœæ¸¸æˆæœªå¼€å§‹æˆ–å¡ç‰‡å·²åŒ¹é…ï¼Œåˆ™å¿½ç•¥ç‚¹å‡»
            if (!gameStarted || cardElement.classList.contains('matched') || gameCompleted) {
                return;
            }
            
            // å¦‚æœå·²ç»é€‰ä¸­äº†ä¸¤å¼ å¡ç‰‡ï¼Œå…ˆæ¸…é™¤é€‰æ‹©
            if (selectedCards.length >= 2) {
                selectedCards.forEach(card => {
                    card.element.classList.remove('selected');
                });
                selectedCards = [];
            }
            
            // é€‰ä¸­å½“å‰å¡ç‰‡
            cardElement.classList.add('selected');
            selectedCards.push({ element: cardElement, index });
            
            // å¦‚æœé€‰ä¸­äº†ä¸¤å¼ å¡ç‰‡ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
            if (selectedCards.length === 2) {
                totalAttempts++;
                checkForMatch();
            }
        }
        
        // æ£€æŸ¥å¡ç‰‡æ˜¯å¦åŒ¹é…
        function checkForMatch() {
            const card1 = cards[selectedCards[0].index];
            const card2 = cards[selectedCards[1].index];
            
            // æ£€æŸ¥æ˜¯å¦åŒ¹é…ï¼ˆåŒä¸€å•è¯å¯¹ä¸”ä¸€ä¸ªæ˜¯è‹±è¯­ä¸€ä¸ªæ˜¯å›¾ç‰‡ï¼‰
            if (card1.pairId === card2.pairId && card1.type !== card2.type) {
                // åŒ¹é…æˆåŠŸ
                correctAttempts++;
                setTimeout(() => {
                    selectedCards.forEach(card => {
                        card.element.classList.add('matched');
                        card.element.classList.remove('selected');
                    });
                    
                    selectedCards = [];
                    matchedPairs++;
                    score += 10;
                    wordsLearnedToday++;
                    updateDisplay();
                    
                    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                    if (matchedPairs === cards.length / 2) {
                        gameCompleted = true;
                        // åœæ­¢è®¡æ—¶å™¨
                        if (timer) {
                            clearInterval(timer);
                            timer = null;
                        }
                        createFireworks();
                        setTimeout(() => {
                            // æ˜¾ç¤ºä¸‹ä¸€å…³æŒ‰é’®
                            nextLevelButton.style.display = 'block';
                            startButton.style.display = 'none';
                        }, 1000);
                    }
                }, 500);
            } else {
                // åŒ¹é…å¤±è´¥
                selectedCards.forEach(card => {
                    card.element.classList.add('wrong-match');
                });
                
                setTimeout(() => {
                    selectedCards.forEach(card => {
                        card.element.classList.remove('selected');
                        card.element.classList.remove('wrong-match');
                    });
                    
                    selectedCards = [];
                }, 1000);
            }
        }
        
        // åˆ›å»ºç¤¼èŠ±æ•ˆæœ
        function createFireworks() {
            const colors = ['#ff6b6b', '#ffd166', '#06d6a0', '#118ab2', '#ef476f', '#5ce1e6'];
            const fireworkCount = 30;
            
            for (let i = 0; i < fireworkCount; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                
                // éšæœºé¢œè‰²
                const color = colors[Math.floor(Math.random() * colors.length)];
                firework.style.backgroundColor = color;
                
                // éšæœºä½ç½®
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                firework.style.setProperty('--x', `${x}px`);
                firework.style.setProperty('--y', `${y}px`);
                
                // éšæœºå¤§å°å’ŒåŠ¨ç”»å»¶è¿Ÿ
                const size = Math.random() * 8 + 3;
                const delay = Math.random() * 0.5;
                
                firework.style.width = `${size}px`;
                firework.style.height = `${size}px`;
                firework.style.animation = `firework 1s ease-out ${delay}s forwards`;
                
                document.body.appendChild(firework);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    firework.remove();
                }, 1500);
            }
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameStarted) return;
            
            gameStarted = true;
            startButton.disabled = true;
            
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
            }
            
            // å¼€å§‹è®¡æ—¶
            timer = setInterval(() => {
                timeLeft--;
                updateDisplay();
                
                if (timeLeft <= 10) {
                    timerDisplay.classList.add('timer-warning');
                }
                
                if (timeLeft <= 0) {
                    endGame(false);
                }
            }, 1000);
        }
        
        // ç»“æŸæ¸¸æˆ
        function endGame(isWin) {
            // åœæ­¢è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            gameStarted = false;
            timerDisplay.classList.remove('timer-warning');
            
            if (isWin) {
                score += timeLeft * 2; // å‰©ä½™æ—¶é—´å¥–åŠ±
                updateDisplay();
            } else {
                // æ—¶é—´åˆ°ï¼Œæ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
                showGameOverMessage();
            }
        }
        
        // ç»§ç»­æ¸¸æˆ
        function continueGame() {
            if (continueCount > 0) {
                continueCount--;
                timeLeft = 30; // ç»§ç»­æ¸¸æˆç»™30ç§’æ—¶é—´
                gameStarted = true;
                gameOverMessage.style.display = 'none';
                gameBoard.style.display = 'grid';
                
                // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
                if (timer) {
                    clearInterval(timer);
                }
                
                // é‡æ–°å¼€å§‹è®¡æ—¶
                timer = setInterval(() => {
                    timeLeft--;
                    updateDisplay();
                    
                    if (timeLeft <= 10) {
                        timerDisplay.classList.add('timer-warning');
                    }
                    
                    if (timeLeft <= 0) {
                        endGame(false);
                    }
                }, 1000);
            }
        }
        
        // è¿›å…¥ä¸‹ä¸€å…³
        function nextLevel() {
            currentLevel++;
            initGame();
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            timerDisplay.textContent = timeLeft;
            scoreDisplay.textContent = score;
            levelDisplay.textContent = currentLevel;
        }
        
        // é‡ç½®å·²å­¦å•è¯
        function resetLearnedWords() {
            usedWords = new Set();
            currentLevel = 1;
            score = 0;
            wordsLearnedToday = 0;
            totalAttempts = 0;
            correctAttempts = 0;
            continueCount = 2;
            
            // æ¸…é™¤è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            completionMessage.style.display = 'none';
            gameOverMessage.style.display = 'none';
            gameBoard.style.display = 'grid';
            initGame();
        }
        
        // è®¾ç½®å¹´çº§
        function setGrade(grade) {
            currentGrade = parseInt(grade);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.grade-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.grade-btn[data-grade="${grade}"]`).classList.add('active');
            
            // é‡ç½®å·²å­¦å•è¯
            usedWords = new Set();
            
            // é‡æ–°åˆå§‹åŒ–æ¸¸æˆ
            resetLearnedWords();
        }
        
        // äº‹ä»¶ç›‘å¬
        startButton.addEventListener('click', startGame);
        nextLevelButton.addEventListener('click', nextLevel);
        restartButton.addEventListener('click', resetLearnedWords);
        continueGameButton.addEventListener('click', continueGame);
        restartFromGameOverButton.addEventListener('click', resetLearnedWords);
        resetWordsButton.addEventListener('click', resetLearnedWords);
        
        // å¹´çº§é€‰æ‹©äº‹ä»¶
        document.querySelectorAll('.grade-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setGrade(this.dataset.grade);
            });
        });
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>